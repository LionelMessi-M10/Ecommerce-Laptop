{"ast":null,"code":"import _asyncToGenerator from \"C:/Study/DATN/client-cellphones/client-admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { EventEmitter } from '@angular/core';\nimport { MatTableDataSource } from '@angular/material/table';\nimport Swal from 'sweetalert2';\nimport { jsPDF } from 'jspdf';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"src/app/services/order.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/sort\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\n\nfunction OrderDetailComponent_ng_template_0_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 21);\n    i0.ɵɵtext(1, \"STT\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r21 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i_r21 + 1);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 23);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 22);\n    i0.ɵɵelement(1, \"img\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", row_r22.product.image, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"S\\u1EA3n ph\\u1EA9m\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r23.product.name);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"S\\u1ED1 l\\u01B0\\u1EE3ng\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(row_r24.quantity);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1, \"Gi\\u00E1\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r25 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, row_r25.price, \"VND\"));\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 25);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 26);\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function OrderDetailComponent_ng_template_0_button_26_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return ctx_r27.deliver();\n    });\n    i0.ɵɵtext(1, \"X\\u00E1c nh\\u1EADn \\u0111\\u01A1n\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function OrderDetailComponent_ng_template_0_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return ctx_r29.exportInvoice();\n    });\n    i0.ɵɵtext(1, \"Xu\\u1EA5t h\\u00F3a \\u0111\\u01A1n\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_button_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function OrderDetailComponent_ng_template_0_button_28_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return ctx_r31.cancel();\n    });\n    i0.ɵɵtext(1, \"Hu\\u1EF7 \\u0111\\u01A1n\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_button_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function OrderDetailComponent_ng_template_0_button_29_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return ctx_r33.confirm();\n    });\n    i0.ɵɵtext(1, \"\\u0110\\u00E3 Thanh To\\u00E1n\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderDetailComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"h2\", 3);\n    i0.ɵɵtext(2, \"Chi ti\\u1EBFt \\u0111\\u01A1n h\\u00E0ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 4);\n    i0.ɵɵelementStart(7, \"table\", 5);\n    i0.ɵɵelementContainerStart(8, 6);\n    i0.ɵɵtemplate(9, OrderDetailComponent_ng_template_0_th_9_Template, 2, 0, \"th\", 7);\n    i0.ɵɵtemplate(10, OrderDetailComponent_ng_template_0_td_10_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(11, 9);\n    i0.ɵɵtemplate(12, OrderDetailComponent_ng_template_0_th_12_Template, 1, 0, \"th\", 10);\n    i0.ɵɵtemplate(13, OrderDetailComponent_ng_template_0_td_13_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(14, 11);\n    i0.ɵɵtemplate(15, OrderDetailComponent_ng_template_0_th_15_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(16, OrderDetailComponent_ng_template_0_td_16_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(17, 12);\n    i0.ɵɵtemplate(18, OrderDetailComponent_ng_template_0_th_18_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(19, OrderDetailComponent_ng_template_0_td_19_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(20, 13);\n    i0.ɵɵtemplate(21, OrderDetailComponent_ng_template_0_th_21_Template, 2, 0, \"th\", 10);\n    i0.ɵɵtemplate(22, OrderDetailComponent_ng_template_0_td_22_Template, 3, 4, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(23, OrderDetailComponent_ng_template_0_tr_23_Template, 1, 0, \"tr\", 14);\n    i0.ɵɵtemplate(24, OrderDetailComponent_ng_template_0_tr_24_Template, 1, 0, \"tr\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 16);\n    i0.ɵɵtemplate(26, OrderDetailComponent_ng_template_0_button_26_Template, 2, 0, \"button\", 17);\n    i0.ɵɵtemplate(27, OrderDetailComponent_ng_template_0_button_27_Template, 2, 0, \"button\", 18);\n    i0.ɵɵtemplate(28, OrderDetailComponent_ng_template_0_button_28_Template, 2, 0, \"button\", 19);\n    i0.ɵɵtemplate(29, OrderDetailComponent_ng_template_0_button_29_Template, 2, 0, \"button\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"T\\u1ED5ng ti\\u1EC1n: \", i0.ɵɵpipeBind2(5, 8, ctx_r1.order.amount, \"VND\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"dataSource\", ctx_r1.listData);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r1.columns);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r1.columns);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.status == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.status == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.status == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.status == 1);\n  }\n}\n\nexport class OrderDetailComponent {\n  constructor(modalService, orderService, toastr) {\n    this.modalService = modalService;\n    this.orderService = orderService;\n    this.toastr = toastr;\n    this.columns = ['index', 'image', 'product', 'quantity', 'price'];\n    this.updateFinish = new EventEmitter();\n  }\n\n  ngOnInit() {\n    this.getOrder();\n    this.getDetail();\n  }\n\n  getOrder() {\n    this.orderService.getById(this.orderId).subscribe(data => {\n      this.order = data;\n    }, error => {\n      this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\n    });\n  }\n\n  getDetail() {\n    this.orderService.getByOrder(this.orderId).subscribe(data => {\n      this.orderDetails = data;\n      this.listData = new MatTableDataSource(this.orderDetails);\n      this.orderDetailLength = this.orderDetails.length;\n    }, error => {\n      this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\n    });\n  }\n\n  open(content) {\n    this.modalService.open(content, {\n      centered: true,\n      size: 'lg'\n    });\n  }\n\n  deliver() {\n    Swal.fire({\n      title: 'Bạn muốn xác nhận đơn hàng này ?',\n      icon: 'question',\n      showCancelButton: true,\n      confirmButtonText: 'Xác nhận',\n      cancelButtonText: 'Không'\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.orderService.deliver(this.orderId).subscribe(data => {\n          this.toastr.success('Xác nhận thành công!', 'Hệ thống');\n          this.updateFinish.emit('done');\n          this.modalService.dismissAll();\n        }, error => {\n          this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\n        });\n      }\n    });\n  }\n\n  cancel() {\n    Swal.fire({\n      title: 'Bạn muốn huỷ đơn hàng này ?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Huỷ',\n      cancelButtonText: 'Không'\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.orderService.cancel(this.orderId).subscribe(data => {\n          this.toastr.success('Huỷ thành công!', 'Hệ thống');\n          this.updateFinish.emit('done');\n          this.modalService.dismissAll();\n        }, error => {\n          this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\n        });\n      }\n    });\n  }\n\n  confirm() {\n    Swal.fire({\n      title: 'Bạn muốn xác nhận đơn hàng này đã thanh toán?',\n      icon: 'question',\n      showCancelButton: true,\n      confirmButtonText: 'Xác nhận',\n      cancelButtonText: 'Không'\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.orderService.success(this.orderId).subscribe(data => {\n          this.toastr.success('Xác nhận thành công!', 'Hệ thống');\n          this.updateFinish.emit('done');\n          this.modalService.dismissAll();\n        }, error => {\n          this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\n        });\n      }\n    });\n  } // xuat hoa don\n\n\n  exportInvoice() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const doc = new jsPDF(); // dat font chu\n\n      doc.setFont('Roboto', 'bold');\n      doc.setTextColor(0, 0, 0); // Black color for header\n      // Add header\n\n      doc.setFontSize(24);\n      doc.text('Hoa Don Ban Hang', 10, 20); // Generate QR code\n\n      const qrCodeData = 'https://example.com/your-qr-code-data'; // Thay thế bằng dữ liệu QR của bạn\n\n      const qrCodeImage = yield QRCode.toDataURL(qrCodeData); // Add QR code to PDF\n\n      doc.addImage(qrCodeImage, 'PNG', 150, 10, 40, 40); // Thêm mã QR vào PDF\n      // Date Issued and Issued to\n\n      doc.setFontSize(12);\n      doc.setTextColor(0, 0, 0);\n      doc.text(`Ngay dat hang:\\n${new Date(_this.order.orderDate).toLocaleDateString()}`, 10, 40);\n      doc.text(`Ten khach hang:\\n${_this.order.user.name}`, 10, 55); // Shipping Address\n\n      const shippingAddress = [\"Dia chi nhan hang:\", _this.order.address, _this.order.phone];\n      doc.text(shippingAddress.join('\\n'), 150, 40); // Add table header\n\n      doc.setFillColor(200, 200, 200); // Light gray background for table header\n\n      doc.rect(10, 70, 190, 10, 'F');\n      doc.setTextColor(0, 0, 0);\n      doc.text('San pham', 15, 75);\n      doc.text('So luong', 85, 75);\n      doc.text('Don gia', 125, 75);\n      doc.text('Thanh tien', 165, 75); // Add table rows\n\n      let startY = 85;\n      let subtotal = 0;\n\n      _this.orderDetails.forEach(detail => {\n        const total = detail.quantity * detail.price;\n        subtotal += total;\n        doc.setTextColor(0, 0, 0);\n        doc.text(`${detail.product.name}`, 15, startY);\n        doc.text(`${detail.quantity}`, 90, startY, {\n          align: 'right'\n        });\n        doc.text(`${detail.price.toLocaleString('vi-VN')}`, 130, startY, {\n          align: 'right'\n        });\n        doc.text(`${total.toLocaleString('vi-VN')}`, 180, startY, {\n          align: 'right'\n        });\n        startY += 10;\n      });\n\n      doc.setFont('Roboto', 'bold');\n      doc.text(`Tong tien: ${subtotal.toLocaleString('vi-VN')}`, 180, startY + 10, {\n        align: 'right'\n      });\n      doc.save('Invoice.pdf');\n    })();\n  }\n\n}\n\nOrderDetailComponent.ɵfac = function OrderDetailComponent_Factory(t) {\n  return new (t || OrderDetailComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.ToastrService));\n};\n\nOrderDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OrderDetailComponent,\n  selectors: [[\"app-order-detail\"]],\n  inputs: {\n    orderId: \"orderId\"\n  },\n  outputs: {\n    updateFinish: \"updateFinish\"\n  },\n  decls: 3,\n  vars: 0,\n  consts: [[\"content\", \"\"], [1, \"fas\", \"fa-clipboard-check\", 2, \"cursor\", \"pointer\", \"color\", \"teal\", \"font-size\", \"19px\", 3, \"click\"], [1, \"modal-header\"], [1, \"modal-title\", \"p-0\"], [1, \"modal-body\"], [\"mat-table\", \"\", \"matSort\", \"\", 1, \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"index\"], [\"mat-header-cell\", \"\", \"style\", \"width: 10%;\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"image\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"product\"], [\"matColumnDef\", \"quantity\"], [\"matColumnDef\", \"price\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [1, \"d-flex\", \"m-2\", \"mb-4\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"class\", \"col-2 ml-2\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", \"class\", \"col-2 ml-2\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", \"class\", \"col-2 ml-2\", 3, \"click\", 4, \"ngIf\"], [\"mat-header-cell\", \"\", 2, \"width\", \"10%\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\"], [1, \"img-fluid\", 2, \"width\", \"40px\", 3, \"src\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"col-2\", \"ml-2\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 1, \"col-2\", \"ml-2\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 1, \"col-2\", \"ml-2\", 3, \"click\"]],\n  template: function OrderDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r35 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵtemplate(0, OrderDetailComponent_ng_template_0_Template, 30, 11, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(2, \"a\", 1);\n      i0.ɵɵlistener(\"click\", function OrderDetailComponent_Template_a_click_2_listener() {\n        i0.ɵɵrestoreView(_r35);\n\n        const _r0 = i0.ɵɵreference(1);\n\n        return ctx.open(_r0);\n      });\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i4.MatTable, i5.MatSort, i4.MatColumnDef, i4.MatHeaderCellDef, i4.MatCellDef, i4.MatHeaderRowDef, i4.MatRowDef, i6.NgIf, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, i7.MatButton],\n  pipes: [i6.CurrencyPipe],\n  styles: [\"table[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLWRldGFpbC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztBQUNmIiwiZmlsZSI6Im9yZGVyLWRldGFpbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsidGFibGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:\\Study\\DATN\\client-cellphones\\client-admin\\src\\app\\admin\\order-detail\\order-detail.component.ts","C:\\Study\\DATN\\client-cellphones\\client-admin\\src\\app\\admin\\order-detail\\order-detail.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output, TemplateRef } from '@angular/core';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Order } from 'src/app/common/Order';\r\nimport { OrderDetail } from 'src/app/common/OrderDetail';\r\nimport { OrderService } from 'src/app/services/order.service';\r\nimport Swal from 'sweetalert2';\r\nimport { jsPDF } from 'jspdf';\r\nimport QRC\r\n\r\n@Component({\r\n  selector: 'app-order-detail',\r\n  templateUrl: './order-detail.component.html',\r\n  styleUrls: ['./order-detail.component.css']\r\n})\r\nexport class OrderDetailComponent implements OnInit {\r\n\r\n  orderDetails!: OrderDetail[];\r\n  order!: Order;\r\n  listData!: MatTableDataSource<OrderDetail>;\r\n  orderDetailLength!: number;\r\n\r\n  columns: string[] = ['index', 'image', 'product', 'quantity', 'price'];\r\n\r\n  @Output()\r\n  updateFinish: EventEmitter<any> = new EventEmitter<any>();\r\n  @Input() orderId!: number;\r\n\r\n  constructor(private modalService: NgbModal, private orderService: OrderService, private toastr: ToastrService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getOrder();\r\n    this.getDetail();\r\n  }\r\n\r\n  getOrder() {\r\n    this.orderService.getById(this.orderId).subscribe(data => {\r\n      this.order = data as Order;\r\n    }, error => {\r\n      this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\r\n    })\r\n  }\r\n\r\n  getDetail() {\r\n    this.orderService.getByOrder(this.orderId).subscribe(data => {\r\n      this.orderDetails = data as OrderDetail[];\r\n      this.listData = new MatTableDataSource(this.orderDetails);\r\n      this.orderDetailLength = this.orderDetails.length;\r\n    }, error => {\r\n      this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\r\n    })\r\n  }\r\n\r\n  open(content: TemplateRef<any>) {\r\n    this.modalService.open(content, { centered: true, size: 'lg' });\r\n  }\r\n\r\n  deliver() {\r\n    Swal.fire({\r\n      title: 'Bạn muốn xác nhận đơn hàng này ?',\r\n      icon: 'question',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Xác nhận',\r\n      cancelButtonText: 'Không'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        this.orderService.deliver(this.orderId).subscribe(data => {\r\n          this.toastr.success('Xác nhận thành công!', 'Hệ thống');\r\n          this.updateFinish.emit('done');\r\n          this.modalService.dismissAll();\r\n        }, error => {\r\n          this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  cancel() {\r\n    Swal.fire({\r\n      title: 'Bạn muốn huỷ đơn hàng này ?',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Huỷ',\r\n      cancelButtonText: 'Không'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        this.orderService.cancel(this.orderId).subscribe(data => {\r\n          this.toastr.success('Huỷ thành công!', 'Hệ thống');\r\n          this.updateFinish.emit('done');\r\n          this.modalService.dismissAll();\r\n        }, error => {\r\n          this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  confirm() {\r\n    Swal.fire({\r\n      title: 'Bạn muốn xác nhận đơn hàng này đã thanh toán?',\r\n      icon: 'question',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Xác nhận',\r\n      cancelButtonText: 'Không'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        this.orderService.success(this.orderId).subscribe(data => {\r\n          this.toastr.success('Xác nhận thành công!', 'Hệ thống');\r\n          this.updateFinish.emit('done');\r\n          this.modalService.dismissAll();\r\n        }, error => {\r\n          this.toastr.error('Lỗi! ' + error.status, 'Hệ thống');\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  // xuat hoa don\r\n  async exportInvoice() {\r\n    const doc = new jsPDF();\r\n\r\n    // dat font chu\r\n    doc.setFont('Roboto', 'bold');\r\n    doc.setTextColor(0, 0, 0); // Black color for header\r\n\r\n    // Add header\r\n    doc.setFontSize(24);\r\n    doc.text('Hoa Don Ban Hang', 10, 20);\r\n    \r\n    // Generate QR code\r\n    const qrCodeData = 'https://example.com/your-qr-code-data'; // Thay thế bằng dữ liệu QR của bạn\r\n    const qrCodeImage = await QRCode.toDataURL(qrCodeData);\r\n\r\n    // Add QR code to PDF\r\n    doc.addImage(qrCodeImage, 'PNG', 150, 10, 40, 40); // Thêm mã QR vào PDF\r\n\r\n\r\n    // Date Issued and Issued to\r\n    doc.setFontSize(12);\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.text(`Ngay dat hang:\\n${new Date(this.order.orderDate).toLocaleDateString()}`, 10, 40);\r\n    doc.text(`Ten khach hang:\\n${this.order.user.name}`, 10, 55);\r\n\r\n    // Shipping Address\r\n    const shippingAddress = [\r\n      \"Dia chi nhan hang:\",\r\n      this.order.address,\r\n      this.order.phone\r\n  ];\r\n  doc.text(shippingAddress.join('\\n'), 150, 40);\r\n\r\n    // Add table header\r\n    doc.setFillColor(200, 200, 200); // Light gray background for table header\r\n    doc.rect(10, 70, 190, 10, 'F');\r\n    doc.setTextColor(0, 0, 0);\r\n    doc.text('San pham', 15, 75);\r\n    doc.text('So luong', 85, 75);\r\n    doc.text('Don gia', 125, 75);\r\n    doc.text('Thanh tien', 165, 75);\r\n\r\n    // Add table rows\r\n    let startY = 85;\r\n    let subtotal = 0;\r\n    this.orderDetails.forEach((detail) => {\r\n        const total = detail.quantity * detail.price;\r\n        subtotal += total;\r\n\r\n        doc.setTextColor(0, 0, 0);\r\n        doc.text(`${detail.product.name}`, 15, startY);\r\n        doc.text(`${detail.quantity}`, 90, startY, { align: 'right' });\r\n        doc.text(`${detail.price.toLocaleString('vi-VN')}`, 130, startY, { align: 'right' });\r\n        doc.text(`${total.toLocaleString('vi-VN')}`, 180, startY, { align: 'right' });\r\n\r\n        startY += 10;\r\n    });\r\n\r\n    doc.setFont('Roboto', 'bold');\r\n    doc.text(`Tong tien: ${subtotal.toLocaleString('vi-VN')}`, 180, startY + 10, { align: 'right' });\r\n\r\n    doc.save('Invoice.pdf');\r\n}\r\n\r\n}\r\n","<ng-template #content let-c=\"close\" let-d=\"dismiss\">\r\n    <div class=\"modal-header\">\r\n        <h2 class=\"modal-title p-0\">Chi tiết đơn hàng</h2>\r\n        <h2>Tổng tiền: {{order.amount|currency:'VND'}}</h2>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <table mat-table [dataSource]=\"listData\" matSort class=\"mat-elevation-z8\">\r\n            <ng-container matColumnDef=\"index\">\r\n                <th mat-header-cell *matHeaderCellDef style=\"width: 10%;\">STT</th>\r\n                <td mat-cell *matCellDef=\"let row, let i = index\">{{i+1}}</td>\r\n            </ng-container>\r\n            <ng-container matColumnDef=\"image\">\r\n                <th mat-header-cell *matHeaderCellDef></th>\r\n                <td mat-cell *matCellDef=\"let row\">\r\n                    <img [src]=\"row.product.image\" class=\"img-fluid\" style=\"width: 40px;\">\r\n                </td>\r\n            </ng-container>\r\n            <ng-container matColumnDef=\"product\">\r\n                <th mat-header-cell *matHeaderCellDef>Sản phẩm</th>\r\n                <td mat-cell *matCellDef=\"let row\">{{row.product.name}}</td>\r\n            </ng-container>\r\n            <ng-container matColumnDef=\"quantity\">\r\n                <th mat-header-cell *matHeaderCellDef>Số lượng</th>\r\n                <td mat-cell *matCellDef=\"let row\">{{row.quantity}}</td>\r\n            </ng-container>\r\n            <ng-container matColumnDef=\"price\">\r\n                <th mat-header-cell *matHeaderCellDef>Giá</th>\r\n                <td mat-cell *matCellDef=\"let row\">{{row.price|currency:'VND'}}</td>\r\n            </ng-container>\r\n            <tr mat-header-row *matHeaderRowDef=\"columns\"></tr>\r\n            <tr mat-row *matRowDef=\"let row; columns: columns;\"></tr>\r\n        </table>\r\n    </div>\r\n    <div class=\"d-flex m-2 mb-4\">\r\n        <button mat-raised-button color=\"primary\" *ngIf=\"order.status==0\" (click)=\"deliver()\" class=\"col-2 ml-2\">Xác nhận đơn</button>\r\n        <button mat-raised-button color=\"primary\" *ngIf=\"order.status==1\" (click)=\"exportInvoice()\">Xuất hóa đơn</button>\r\n        <button mat-raised-button color=\"warn\" *ngIf=\"order.status==0\" (click)=\"cancel()\" class=\"col-2 ml-2\">Huỷ đơn</button>\r\n        <button mat-raised-button color=\"accent\" *ngIf=\"order.status==1\" (click)=\"confirm()\" class=\"col-2 ml-2\">Đã Thanh Toán</button>\r\n    </div>\r\n</ng-template>\r\n<a class=\"fas fa-clipboard-check\" style=\"cursor: pointer; color: teal; font-size: 19px;\" (click)=\"open(content)\"></a>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}